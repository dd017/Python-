from datetime import datetime

def calculate_countdown(target_date_str):
    # Parse the target date string into a datetime object
    try:
        target_date = datetime.strptime(target_date_str, "%Y-%m-%d %H:%M:%S")
    except ValueError:
        return "Invalid date format. Please use 'YYYY-MM-DD HH:MM:SS'."

    # Get the current date and time
    now = datetime.now()

    # Calculate the difference
    countdown = target_date - now

    # If the countdown is negative, the target date has passed
    if countdown.total_seconds() < 0:
        return "The target date has already passed."

    # Extract days, hours, minutes, and seconds
    days = countdown.days
    seconds = countdown.seconds
    hours = seconds // 3600
    minutes = (seconds % 3600) // 60
    seconds = seconds % 60

    # Return the formatted string
    return f"Time remaining: {days} days, {hours} hours, {minutes} minutes, {seconds} seconds"

# Example usage
target_date_input = "2024-12-31 23:59:59"
print(calculate_countdown(target_date_input))
